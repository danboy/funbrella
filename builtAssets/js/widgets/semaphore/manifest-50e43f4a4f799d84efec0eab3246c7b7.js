function semaphore(a){jade.debug=[{lineno:1,filename:undefined}];try{var b=[],c=a||{},d=c.result,e=c.project_name,f=c.branch_name,g=c.commit;return jade.debug.unshift({lineno:1,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:1,filename:jade.debug[0].filename}),b.push("<a"+jade.attrs({name:"ring","class":[""+d+" ring"]},{name:!0,"class":!0})+">"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.shift(),b.push("</a>"),jade.debug.shift(),jade.debug.unshift({lineno:2,filename:jade.debug[0].filename}),b.push("<h1>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:2,filename:jade.debug[0].filename}),b.push(" "),jade.debug.shift(),b.push("\n"),jade.debug.unshift({lineno:3,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=e)==null?"":jade.interp)+":"),jade.debug.shift(),jade.debug.unshift({lineno:4,filename:jade.debug[0].filename}),b.push("<strong"+jade.attrs({"class":[""+d+""]},{"class":!0})+">"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:4,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=f)==null?"":jade.interp)+""),jade.debug.shift(),jade.debug.shift(),b.push("</strong>"),jade.debug.shift(),jade.debug.unshift({lineno:5,filename:jade.debug[0].filename}),b.push("<h3>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:5,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=g.author_name)==null?"":jade.interp)+""),jade.debug.shift(),jade.debug.shift(),b.push("</h3>"),jade.debug.shift(),jade.debug.unshift({lineno:6,filename:jade.debug[0].filename}),b.push("<p>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:6,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=g.message)==null?"":jade.interp)+""),jade.debug.shift(),jade.debug.shift(),b.push("</p>"),jade.debug.shift(),jade.debug.shift(),b.push("</h1>"),jade.debug.shift(),jade.debug.shift(),b.join("")}catch(h){jade.rethrow(h,jade.debug[0].filename,jade.debug[0].lineno)}}var Funbrella=Funbrella||{};Funbrella.semaphore=Funbrella.WidgetView.extend({prefs:{urls:[],url:0,token:"",audioAlerts:!1,status:[],frequency:20},requires:["urls","token"],help:{title:"I need some settings",description:"I need your project and branch id from semaphore to work. Go to semaphore and check you project api for more",link:{url:"https://semaphoreapp.com/",text:"visit semaphore"}},getUrl:function(){this.prefs.url=this.prefs.url<this.prefs.urls.length-1?this.prefs.url+1:0,this.url="https://semaphoreapp.com/api/v1/projects/"+this.prefs.urls[this.prefs.url]+"/status?auth_token="+this.prefs.token},setup:function(){this.getUrl()},template:semaphore,alertStatusChange:function(a){var b=a.result,c=a.project_name+a.branch_name;this.prefs.status[c]||(this.prefs.status[c]=b);if(b!==this.prefs.status[c]){this.prefs.status[c]=b;if(b=="passed")var d=a.project_name+" branch "+a.branch_name+" "+a.result+" thanks to "+a.commit.author_name;else if(b=="failed")var d=a.commit.author_name+" broke "+a.project_name+" branch "+a.branch_name;else var d=a.commit.author_name+' pushed "'+a.commit.message+'" to branch '+a.branch_name+" on "+a.project_name;this.prefs.audioAlerts&&speak(d),Funbrella.Messages.send({type:"semaphore "+a.result,sender:"semaphore",content:d})}},data:function(a,b){this.getUrl(),this.alertStatusChange(a),b(a)}}),function(){}.call(this)