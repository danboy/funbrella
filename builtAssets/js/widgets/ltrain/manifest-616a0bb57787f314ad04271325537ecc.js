function ltrain(a){jade.debug=[{lineno:1,filename:undefined}];try{var b=[],c=a||{},d=c.name,e=c.trains;return jade.debug.unshift({lineno:1,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:1,filename:jade.debug[0].filename}),b.push("<h1>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:1,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=d)==null?"":jade.interp)+""),jade.debug.shift(),jade.debug.shift(),b.push("</h1>"),jade.debug.shift(),jade.debug.unshift({lineno:3,filename:jade.debug[0].filename}),b.push("<table>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:3,filename:jade.debug[0].filename}),function(){var a=e;if("number"==typeof a.length)for(var c=0,d=a.length;c<d;c++){var f=a[c];jade.debug.unshift({lineno:3,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:4,filename:jade.debug[0].filename}),b.push("<tr"+jade.attrs({"class":[""+f.rt+""]},{"class":!0})+">"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:5,filename:jade.debug[0].filename}),b.push("<td>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:5,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=f.stpDe)==null?"":jade.interp)+""),jade.debug.shift(),jade.debug.shift(),b.push("</td>"),jade.debug.shift(),jade.debug.unshift({lineno:6,filename:jade.debug[0].filename}),b.push("<td>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:6,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=f.arrival)==null?"":jade.interp)+""),jade.debug.shift(),jade.debug.shift(),b.push("</td>"),jade.debug.shift(),jade.debug.shift(),b.push("</tr>"),jade.debug.shift(),jade.debug.shift()}else{var d=0;for(var c in a){d++;var f=a[c];jade.debug.unshift({lineno:3,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:4,filename:jade.debug[0].filename}),b.push("<tr"+jade.attrs({"class":[""+f.rt+""]},{"class":!0})+">"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:5,filename:jade.debug[0].filename}),b.push("<td>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:5,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=f.stpDe)==null?"":jade.interp)+""),jade.debug.shift(),jade.debug.shift(),b.push("</td>"),jade.debug.shift(),jade.debug.unshift({lineno:6,filename:jade.debug[0].filename}),b.push("<td>"),jade.debug.unshift({lineno:undefined,filename:jade.debug[0].filename}),jade.debug.unshift({lineno:6,filename:jade.debug[0].filename}),b.push(""+jade.escape((jade.interp=f.arrival)==null?"":jade.interp)+""),jade.debug.shift(),jade.debug.shift(),b.push("</td>"),jade.debug.shift(),jade.debug.shift(),b.push("</tr>"),jade.debug.shift(),jade.debug.shift()}}}.call(this),jade.debug.shift(),jade.debug.shift(),b.push("</table>"),jade.debug.shift(),jade.debug.shift(),b.join("")}catch(f){jade.rethrow(f,jade.debug[0].filename,jade.debug[0].lineno)}}var Funbrella=Funbrella||{};Funbrella.ltrain=Funbrella.WidgetView.extend({prefs:{urls:["http://lapi.transitchicago.com/api/1.0/ttarrivals.aspx?key=3654c77e9dcd4acaa89b6e5ded7fbf86&max=5&mapid=40710"],frequency:30},config:{xml:!0},setup:function(){this.url=this.getUrl()},template:ltrain,getUrl:function(){return this.url=this.url<this.prefs.urls.length-1?this.url+1:0,this.prefs.urls[this.url]},data:function(a,b){var c=a.ctatt.eta,d=this,e={trains:d.cleanDate(c),name:c[0].staNm};b(e)},cleanDate:function(a){return a=_.map(a,function(a){var b=this.getDate(a.arrT);return a.arrival=b>0?b+" min":"now",a.arrival=="arriving"&&(a.arriving=!0),a}.bind(this)),a},getDate:function(a){var b=/^(\d{4})?(\d{2})?(\d{2})[T ]0?(\d+:\d+:\d+)$/,c=a.replace(b,"$2 $3 $1 $4"),d=new Date(c),e=new Date,f=Math.floor((d.getTime()-e.getTime())/6e4);return f}}),function(){}.call(this)